# Система аукциона предметов (Telegram-бот)

Многопользовательская система аукциона с интерфейсом в виде Telegram-бота, поддерживающая просмотр лотов, выставление предметов на аукцион и конкурентные ставки в реальном времени.  
В проекте используются примитивы синхронизации (`ReaderWriterLockSlim`, `lock`), фоновые таймеры и асинхронное программирование (`async/await`) для безопасной работы с общими данными и уведомлений пользователей.

## Основные возможности

- Регистрация пользователей и начальный баланс для каждого аккаунта.  
- Создание лотов с названием, описанием, фотографией, стартовой ценой и длительностью аукциона.  
- Просмотр активных аукционов и выигранных лотов через Telegram-клавиатуру и inline-кнопки.  
- Выставление ставок с проверкой минимального шага и баланса пользователя.  
- Автоматическое завершение аукциона по таймеру и уведомление создателя и победителя.  
- История транзакций по каждому лоту (возврат средств предыдущим участникам, списание и начисление).  

## Технологии

- Язык: C# (.NET 8.0).  
- Интерфейс: Telegram Bot API (библиотека `Telegram.Bot`).  
- Асинхронность: `async/await`, фоновые задачи (`Task.Run`, `Task.Delay`).  
- Синхронизация:
  - `ReaderWriterLockSlim` для одновременного чтения коллекций лотов и пользователей.
  - `lock` для эксклюзивной обработки ставок и банковских операций по одному лоту.

## Структура проекта

- `Program` — точка входа, инициализация `AuctionHouse` и `BotHandler`, запуск бота.  
- `AuctionHouse` — хранение лотов, фоновый таймер завершения аукционов, событие `AuctionEnded`.  
- `AuctionItem` — модель лота и логика ставок, история транзакций и завершение аукциона.  
- `UserAccount` — данные пользователя и его баланс.  
- `Transaction` — отдельная финансовая операция (зачисление/списание).  
- `BotHandler` — обработка команд и сообщений Telegram, сценарий создания лота и ставок.

## Запуск

1. Создайте бота в `@BotFather` и получите токен.
2. Замените `<BOT_TOKEN>` в `BotHandler` на ваш токен (или вынесите его в конфигурацию/переменную окружения).
3. Соберите и запустите проект:
```dotnet run```
4. Откройте Telegram и начните диалог с вашим ботом, нажав на кнопку или отправив команду /start.
